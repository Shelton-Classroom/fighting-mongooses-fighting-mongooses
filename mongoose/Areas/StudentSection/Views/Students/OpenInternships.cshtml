@model IEnumerable<mongoose.Models.Internship>

@{
    ViewBag.Title = "Open Interships";
}
@Html.Partial("_studentNav")
<h2>OPEN INTERNSHIPS</h2>



@using (Html.BeginForm())
{
<p>
    Search Internships: @Html.TextBox("SearchString")
    <input class="btn btn-sm btn-primary" type="submit" value="Search" />
    @Html.ActionLink("Clear All", "OpenInternships", "", new { @class = "btn btn-sm btn-info clear" })
</p>
}

<table class="table">
    <tr>
        <th>
            @Html.ActionLink("DATE ADDED", "OpenInternships", new { sortOrder = ViewBag.DateSortParm })
        </th>
        <th>
            @Html.ActionLink("TITLE", "OpenInternships", new { sortOrder = ViewBag.NameSortParm })
            @*@Html.DisplayNameFor(model => model.Name)*@
        </th>
        @*<th>
            @Html.DisplayNameFor(model => model.Description)
        </th>*@
        @*<th>
            @Html.DisplayNameFor(model => model.Length)
        </th>*@
        @*<th>
            @Html.DisplayNameFor(model => model.Rate)
        </th>*@
        <th>
            @Html.ActionLink("LOCATION", "OpenInternships", new { sortOrder = ViewBag.LocationSortParm })
            @*@Html.DisplayNameFor(model => model.Location)*@
        </th>
        <th>
            @Html.ActionLink("START-DATE", "OpenInternships", new { sortOrder = ViewBag.StartDateSortParm })
            @*@Html.DisplayNameFor(model => model.StartDate)*@
        </th>
        <th>
            @Html.ActionLink("PAID", "OpenInternships", new { sortOrder = ViewBag.PaidSortParm })
            @*@Html.DisplayNameFor(model => model.Paid)*@
        </th>
        <th>
            @Html.ActionLink("EMPLOYER", "OpenInternships", new { sortOrder = ViewBag.EmployerNameSortParm })
            @*@Html.DisplayNameFor(model => model.Employer.Name)*@
        </th>
        <th>
            @Html.DropDownList("Majors", null, "MAJOR", htmlAttributes: new { @class = "form-control", id = "MajorList" })
            @*@Html.DisplayNameFor(model => model.Internship_Major)*@
        </th>
        <th>Save</th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.PostDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Name)
    </td>
    @*<td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>*@
    @*<td>
            @Html.DisplayFor(modelItem => item.Length)
        </td>*@
    @*<td>
            @Html.DisplayFor(modelItem => item.Rate)
        </td>*@
    <td>
        @Html.DisplayFor(modelItem => item.Location)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.StartDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Paid)
    </td>
    <td>
        @Html.ActionLink(item.Employer.Name, "Details", "Employers", new { area = "EmployerSection", id = item.EmployerId }, null)
    </td>
    <td>
        @{

            var major = item.Internship_Major.ToList();
            if (major != null)
            {
                foreach (var m in major)
                {
                    <p>@m.Major.Name</p>
                }
            }
            else
            {
                @Html.ActionLink("Add Major +", "Create/" + item.InternshipId, "Internship_Major", new { area = "Internship_MajorSection" }, null)
            }
        }
    </td>
    <td>
        @{
            var saved = ViewBag.saved;
            if (saved.Contains(item.InternshipId))
            {
                <p><i class="fas fa-heart red" id="save" value="@item.InternshipId" onclick="saveFunction(@item.InternshipId);"></i></p>
            }
            else
            {
                <p><i class="fas fa-heart" id="save" value="@item.InternshipId" onclick="saveFunction(@item.InternshipId);"></i></p>
            }
        }




    </td>
    <td>
        @Html.ActionLink("Details", "Details/" + item.InternshipId, "Internships", new { area = "InternshipSection" }, null)
    </td>
</tr>
    }


</table>


